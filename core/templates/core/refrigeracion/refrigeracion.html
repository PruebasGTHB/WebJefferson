{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Refrigeración - Compresores y Túneles</title>
  <link rel="stylesheet" href="{% static 'css/styles_refrigeracion.css' %}" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="{% static 'js/refrigeracion.js' %}" defer></script>
</head>
<body>
  <div class="header-grid">
    <!-- Sección izquierda: Logo Ingero y Flecha en divs separados -->
    <div class="header-left">
      
      <!-- Logo Ingero -->
      <div class="logo-ingero-wrapper">
        <img src="{% static 'img/logos/logo_ingero.png' %}" alt="Logo Ingero" class="logo-ingero" />
      </div>
      
      <!-- Flecha con dropdown -->
      <div class="flecha-wrapper">
        <button type="button" class="logout-boton" id="userMenuToggle2">
          <img src="{% static 'img/logos/retroceder.png' %}" alt="Volver" class="logout-icon" />
        </button>
  
        <!-- Menú desplegable -->
        <div class="user-dropdown2" id="userDropdown2">
          <form id="logout-form" action="{% url 'menu' %}" method="post">
            {% csrf_token %}
            <button type="submit" class="logout-option">VOLVER AL MENÚ</button>
          </form>
        </div>
      </div>
  
    </div>
  
    <!-- Sección central: Título -->
    <div class="header-center">
      <h2 class="titulo-dashboard">
        <span class="titulo-completo">DASHBOARD FOODCORP COMPRESORES Y TÚNELES AMONÍACO</span>
      </h2>
    </div>
  
    <!-- Sección derecha: Logo FoodCorp -->
    <div class="header-right">
      <img src="{% static 'img/logos/logo-foodcorp2.png' %}" alt="Logo FoodCorp" class="logo-foodcorp" />
    </div>
  </div>
<section class="panel-seleccion">
  <div class="bloque">
    
    <div class="grupo-controles">
      <h3>COMPRESORES</h3>
      <label class="accion-check">
        <input type="checkbox" id="select-all-comp" checked /> 
        
        <span>TODOS</span>
      </label>
      <button class="btn-x" id="deselect-all-comp" title="Deseleccionar todos">✖</button>
      <span class="texto-ninguno">NINGUNO</span>
      <button class="btn-grafana" data-grafana="general-compresores">GRAFANA</button>
    </div>
    
    <div class="card-grid" id="compresores-cards">
      <div class="card-equipo selected">
        <div class="card-header">C1-EM10</div>
        <div class="card-body">
          <span class="estado-color" data-tag="C1"></span>
          <span class="potencia">kW</span>
          <span class="modo">M</span>
        </div>
      </div>
      <div class="card-equipo selected">
        <div class="card-header">C2-EM12</div>
        <div class="card-body">
          <span class="estado-color" data-tag="C2"></span>
          <span class="potencia">kW</span>
          <span class="modo">M</span>
        </div>
      </div>
      <div class="card-equipo selected">
        <div class="card-header">C3-EM30</div>
        <div class="card-body">
          <span class="estado-color" data-tag="C3"></span>
          <span class="potencia">kW</span>
          <span class="modo">M</span>
        </div>
      </div>
      <div class="card-equipo selected">
        <div class="card-header">C4-EM13</div>
        <div class="card-body">
          <span class="estado-color" data-tag="C4"></span>
          <span class="potencia">kW</span>
          <span class="modo">M</span>
        </div>
      </div>
      <div class="card-equipo selected">
        <div class="card-header">C5-EM14</div>
        <div class="card-body">
          <span class="estado-color" data-tag="C5"></span>
          <span class="potencia">kW</span>
          <span class="modo">M</span>
        </div>
      </div>
      <div class="card-equipo selected">
        <div class="card-header">C6-EM15</div>
        <div class="card-body">
          <span class="estado-color" data-tag="C6"></span>
          <span class="potencia">kW</span>
          <span class="modo">M</span>
        </div>
      </div>
      <div class="card-equipo selected">
        <div class="card-header">C7-EM31</div>
        <div class="card-body">
          <span class="estado-color" data-tag="C7"></span>
          <span class="potencia">kW</span>
          <span class="modo">M</span>
        </div>
      </div>
      <div class="card-equipo selected">
        <div class="card-header">C8-EM32</div>
        <div class="card-body">
          <span class="estado-color" data-tag="C8"></span>
          <span class="potencia">kW</span>
          <span class="modo">M</span>
        </div>
      </div>
      <!-- Agrega más compresores aquí -->
    </div>
  </div>

  <div class="bloque">
    
    <div class="grupo-controles">
      <h3>TÚNELES</h3>
      <label class="accion-check">
        <input type="checkbox" id="select-all-tun"  checked/>
        <span>TODOS</span>
      </label>
      <button class="btn-x" id="deselect-all-tun" title="Deseleccionar todos">✖</button>
      <span class="texto-ninguno">NINGUNO</span>
      <button class="btn-grafana" data-grafana="general-tuneles">GRAFANA</button>
    </div>
    <div class="card-grid" id="tuneles-cards">
      <div class="card-equipo selected">
        <div class="card-header">T1-EM25</div>
        <div class="card-body">
          <span class="estado-color" data-tag="T1"></span>
          <span class="potencia">kW</span>
          <span class="modo">M</span>
        </div>
      </div>
      <div class="card-equipo selected">
        <div class="card-header">T2-EM26</div>
        <div class="card-body">
          <span class="estado-color" data-tag="T2"></span>
          <span class="potencia">kW</span>
          <span class="modo">M</span>
        </div>
      </div>
      <div class="card-equipo selected">
        <div class="card-header">T3-EM27</div>
        <div class="card-body">
          <span class="estado-color" data-tag="T3"></span>
          <span class="potencia">kW</span>
          <span class="modo">M</span>
        </div>
      </div>
      <div class="card-equipo selected">
        <div class="card-header">T4-EM28</div>
        <div class="card-body">
          <span class="estado-color" data-tag="T4"></span>
          <span class="potencia">kW</span>
          <span class="modo">M</span>
        </div>
      </div>
      <div class="card-equipo selected">
        <div class="card-header">T5-EM29</div>
        <div class="card-body">
          <span class="estado-color" data-tag="T5"></span>
          <span class="potencia">kW</span>
          <span class="modo">M</span>
        </div>
      </div>
      <div class="card-equipo selected">
        <div class="card-header">T6-EM45</div>
        <div class="card-body">
          <span class="estado-color" data-tag="T6"></span>
          <span class="potencia">kW</span>
          <span class="modo" data-tooltip="(EM17 - EM29) > 40 else 0">C</span>
        </div>
      </div>
      <div class="card-equipo selected">
        <div class="card-header">T7-EM49</div>
        <div class="card-body">
          <span class="estado-color" data-tag="T7"></span>
          <span class="potencia">kW</span>
          <span class="modo" data-tooltip="EM35 + EM36">C</span>
        </div>
      </div>
      <div class="card-equipo selected">
        <div class="card-header">T8-EM50</div>
        <div class="card-body">
          <span class="estado-color" data-tag="T8"></span>
          <span class="potencia">kW</span>
          <span class="modo" data-tooltip="(EM33 - EM49) > 40 else 0">C</span>
        </div>
      </div>
      <div class="card-equipo selected">
        <div class="card-header">T9-EM37</div>
        <div class="card-body">
          <span class="estado-color" data-tag="T9"></span>
          <span class="potencia">kW</span>
          <span class="modo">M</span>
        </div>
      </div>
      <div class="card-equipo selected">
        <div class="card-header">T10-EM38</div>
        <div class="card-body">
          <span class="estado-color" data-tag="T10"></span>
          <span class="potencia">kW</span>
          <span class="modo">M</span>
        </div>
      </div>
      <!-- Agrega más túneles aquí -->
    </div>
  </div>

  <div class="bloque filtros">
    <label class="filtro">FILTRO INICIO:
      <input type="date" id="fecha-inicio" value="2025-01-01" />
    </label>
    <label class="filtro">FILTRO TÉRMINO:
      <input type="date" id="fecha-fin" value="2025-05-06" />
    </label>
    <button class="btn-descarga">DESCARGAR DATOS
      <span class="spinner" style="display: none;"></span>
    </button>
  </div>
</section>

<main class="dashboard-grid">
  <!-- COMPRESORES -->
  <section class="dashboard-col">
    <div class="tabla-grafico">
      <div class="tabla">
        <h4>Voltaje COMPRESORES [V]</h4>
        <table>
          <thead><tr><th>TAG</th><th>Min</th><th>Max</th><th>Promedio</th></tr></thead>
          <tbody id="voltaje-comp-tabla"></tbody>
        </table>
      </div>
      <div class="grafico"><canvas id="voltaje-comp-grafico"></canvas></div>
    </div>

    <div class="tabla-grafico">
      <div class="tabla">
        <h4>Amperaje COMPRESORES [A]</h4>
        <table>
          <thead><tr><th>TAG</th><th>Min</th><th>Max</th><th>Promedio</th></tr></thead>
          <tbody id="amperaje-comp-tabla"></tbody>
        </table>
      </div>
      <div class="grafico"><canvas id="amperaje-comp-grafico"></canvas></div>
    </div>

    <div class="tabla-grafico">
      <div class="tabla">
        <h4>Demanda COMPRESORES [kW]</h4>
        <table>
          <thead><tr><th>TAG</th><th>Min</th><th>Max</th><th>Promedio</th></tr></thead>
          <tbody id="demanda-comp-tabla"></tbody>
        </table>
      </div>
      <div class="grafico"><canvas id="demanda-comp-grafico"></canvas></div>
    </div>
  </section>

  <!-- TÚNELES -->
  <section class="dashboard-col">
    <div class="tabla-grafico">
      <div class="tabla">
        <h4>Voltaje TÚNELES [V]</h4>
        <table>
          <thead><tr><th>TAG</th><th>Min</th><th>Max</th><th>Promedio</th></tr></thead>
          <tbody id="voltaje-tun-tabla"></tbody>
        </table>
      </div>
      <div class="grafico"><canvas id="voltaje-tun-grafico"></canvas></div>
    </div>

    <div class="tabla-grafico">
      <div class="tabla">
        <h4>Amperaje TÚNELES [A]</h4>
        <table>
          <thead><tr><th>TAG</th><th>Min</th><th>Max</th><th>Promedio</th></tr></thead>
          <tbody id="amperaje-tun-tabla"></tbody>
        </table>
      </div>
      <div class="grafico"><canvas id="amperaje-tun-grafico"></canvas></div>
    </div>

    <div class="tabla-grafico">
      <div class="tabla">
        <h4>Demanda TÚNELES [kW]</h4>
        <table>
          <thead><tr><th>TAG</th><th>Min</th><th>Max</th><th>Promedio</th></tr></thead>
          <tbody id="demanda-tun-tabla"></tbody>
        </table>
      </div>
      <div class="grafico"><canvas id="demanda-tun-grafico"></canvas></div>
    </div>
  </section>
</main>
<div id="modalGrafana" class="modal">
  <div class="modal-content">
    <div class="spinner" id="spinnerModal"></div>
    <iframe id="grafanaFrame" src="" frameborder="0"></iframe>
  </div>
</div>


</body>
</html>
